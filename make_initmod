#! /bin/sh

modnames=
for obj
do
  bname=`basename $obj .o`
  modnames="$modnames $bname"
done

echo "/* This file was generated automatically by 'make_initmod' */"
echo
echo '#include "mod_static.h"'
echo

for name in $modnames; do
  echo "int __av_init_module_${name}(struct vmodule *module);"
done

echo
echo "void __av_init_static_modules()"
echo "{"

for name in $modnames; do
  echo "    __av_init_module_${name}(NULL);"
done

echo "}"
echo
echo "/* End of file */"
